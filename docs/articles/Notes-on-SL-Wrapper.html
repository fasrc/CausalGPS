<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Notes on SL Wrappers • CausalGPS</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Notes on SL Wrappers">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CausalGPS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/CausalGPS.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Introduction</h6></li>
    <li><a class="dropdown-item" href="../articles/Estimating-GPS.html">Estimating GPS</a></li>
    <li><a class="dropdown-item" href="../articles/Generating-Pseudo-Population.html">Generating Pseudo Population</a></li>
    <li><a class="dropdown-item" href="../articles/Outcome-Models.html">Outcome Models</a></li>
    <li><a class="dropdown-item" href="../articles/Generating-Synthetic-Data.html">Generate Synthetic Data</a></li>
    <li><a class="dropdown-item" href="../articles/Frequently-Asked-Questions.html">Frequently Asked Questions</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Collabration</h6></li>
    <li><a class="dropdown-item" href="../articles/Developers-Guide.html">Developers Guide</a></li>
    <li><a class="dropdown-item" href="../articles/Testing-the-Package.html">Testing the Package</a></li>
    <li><a class="dropdown-item" href="../articles/Notes-on-SL-Wrapper.html">Notes on SL Wrappers</a></li>
    <li><a class="dropdown-item" href="../articles/Singularity-Image.html">Singularity</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NSAPH-Software/CausalGPS/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Notes on SL Wrappers</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/NSAPH-Software/CausalGPS/blob/HEAD/vignettes/Notes-on-SL-Wrapper.Rmd" class="external-link"><code>vignettes/Notes-on-SL-Wrapper.Rmd</code></a></small>
      <div class="d-none name"><code>Notes-on-SL-Wrapper.Rmd</code></div>
    </div>

    
    
<p>The <a href="https://github.com/ecpolley/SuperLearner/" class="external-link">SuperLearner
package</a> is used to develop prediction models. In order to achieve
the best performance of the algorithms, it is better to create a
customized wrapper for different libraries. This section explains the
steps to create a customized library for <a href="https://xgboost.readthedocs.io/en/latest/index.html" class="external-link">XGBoost</a>
package. XGBoost supports several <a href="https://xgboost.readthedocs.io/en/latest/parameter.html" class="external-link">hyperparameters</a>
to fine-tune the training process. Specifically for this package, there
are two options to create a wrapper for XGBoost (or any other supported
packages), including: - Making a wrapper for the current wrapper (<a href="https://github.com/ecpolley/SuperLearner/blob/master/R/SL.xgboost.R/" class="external-link">SL.xgboost</a>)
- Creating a wrapper from scratch. In this note, we explain the first
approach that is used in developing this package. The SuperLearner
package explicitly supports some of the XGBoost hyperparameters. The
following table explains these parameters:</p>
<table class="table">
<colgroup>
<col width="13%">
<col width="18%">
<col width="32%">
<col width="35%">
</colgroup>
<thead><tr class="header">
<th align="center">SL</th>
<th align="center">XGBoost</th>
<th align="center">GPSmatching</th>
<th align="center">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">ntrees</td>
<td align="center">nrounds</td>
<td align="center">xgb_nrounds</td>
<td align="center">Maximum number of boosting iteration</td>
</tr>
<tr class="even">
<td align="center">shrinkage</td>
<td align="center">eta</td>
<td align="center">xgb_eta</td>
<td align="center">Controls the learning rate [0,1]. Low eta value means
the model is robust for overfitting; however, the computation is
slow.</td>
</tr>
<tr class="odd">
<td align="center">max_depth</td>
<td align="center">max_depth</td>
<td align="center">xgb_max_depth</td>
<td align="center">Maximum depth of tree</td>
</tr>
<tr class="even">
<td align="center">minobspernode</td>
<td align="center">min_child_weight</td>
<td align="center">xgb_min_child_weight</td>
<td align="center">minimum sum of instance weight (hessian) needed in a
child.</td>
</tr>
</tbody>
</table>
<p>We use <code>xgb_</code> prefix to distinguish different libraries’
hyperparameters. Users can pass the hyperparameters through the
<code>param</code> list. Each hyperparameter can be a list of one or
many elements. At each iteration, the program randomly picks one element
out of the many provided for each hyperparameter. This process improves
the chance of developing a balanced pseudo population after several
trials. We would recommend providing a long list of hyperparameters to
have a better idea about the performance of the pseudo population
generating process. For reproducible research, use the one that provides
an acceptable answer.</p>
<p>In order to use the XGBoost package, users need to pass
<code>m_xgboost</code> in the <code>sl_lib</code> list. <code>m</code>
stands for the modified version. Internally for the XGBoost package, we
have only one library on memory (and global environment),
<code>m_xgboost_internal</code>. Before conducting any processing that
involves developing prediction models (e.g., in estimate_gps and
gen_pseudo_pop functions), developers need to call the
<code>gen_wrap_sl_lib</code> function. It will make sure that an updated
wrapper is generated and located in memory.</p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Naeem Khoshnevis, Xiao Wu, Danielle Braun.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
