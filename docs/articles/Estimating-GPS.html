<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Estimating GPS • CausalGPS</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Estimating GPS">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CausalGPS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/CausalGPS.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Introduction</h6></li>
    <li><a class="dropdown-item" href="../articles/Estimating-GPS.html">Estimating GPS</a></li>
    <li><a class="dropdown-item" href="../articles/Generating-Pseudo-Population.html">Generating Pseudo Population</a></li>
    <li><a class="dropdown-item" href="../articles/Outcome-Models.html">Outcome Models</a></li>
    <li><a class="dropdown-item" href="../articles/Generating-Synthetic-Data.html">Generate Synthetic Data</a></li>
    <li><a class="dropdown-item" href="../articles/Frequently-Asked-Questions.html">Frequently Asked Questions</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Collabration</h6></li>
    <li><a class="dropdown-item" href="../articles/Developers-Guide.html">Developers Guide</a></li>
    <li><a class="dropdown-item" href="../articles/Testing-the-Package.html">Testing the Package</a></li>
    <li><a class="dropdown-item" href="../articles/Notes-on-SL-Wrapper.html">Notes on SL Wrappers</a></li>
    <li><a class="dropdown-item" href="../articles/Singularity-Image.html">Singularity</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NSAPH-Software/CausalGPS/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Estimating GPS</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/NSAPH-Software/CausalGPS/blob/HEAD/vignettes/Estimating-GPS.Rmd" class="external-link"><code>vignettes/Estimating-GPS.Rmd</code></a></small>
      <div class="d-none name"><code>Estimating-GPS.Rmd</code></div>
    </div>

    
    
<p>The propensity score (PS) is the conditional probability of
assignment to a particular treatment given a vector of observed
covariates <span class="citation">(Rosenbaum and Rubin 1983)</span>.
<span class="citation">Hirano and Imbens (2004)</span> extended the idea
to studies with continuous treatment (or exposure) and labeled it as the
generalized propensity score (GPS), which is a probability density
function. In this package, we use either a parametric model (a standard
linear regression model) or a non-parametric model (a flexible machine
learning model) to train the GPS model as a density estimation procedure
<span class="citation">(Kennedy et al. 2017)</span>. After the model
training, we can estimate GPS values based on the model prediction. The
machine learning models are developed using the SuperLearner Package
<span class="citation">(Van der Laan, Polley, and Hubbard 2007)</span>.
For more details on the problem framework and assumptions, please see
<span class="citation">Wu et al. (2020)</span>.</p>
<!-- [TBD: Data flow and mathematical equations] -->
<p>Whether the prediction models’ performance should be considered the
primary parameter in the training of the prediction model is an open
research question. In this package, the users have complete control over
the hyperparameters, which can fine-tune the prediction models to
achieve different performance levels.</p>
<div class="section level2">
<h2 id="available-superlearner-libraries">Available SuperLearner Libraries<a class="anchor" aria-label="anchor" href="#available-superlearner-libraries"></a>
</h2>
<p>The users can use any library in the SuperLearner package. However,
in order to have control on internal libraries we generate customized
wrappers. The following table represents the available customized
wrappers as well as hyperparameters.</p>
<table class="table">
<colgroup>
<col width="22%">
<col width="23%">
<col width="11%">
<col width="42%">
</colgroup>
<thead><tr class="header">
<th align="center">Package name</th>
<th align="center">
<code>sl_lib</code> name</th>
<th align="center">prefix</th>
<th align="center">available hyperparameters</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center"><a href="https://xgboost.readthedocs.io/en/latest/index.html" class="external-link">XGBoost</a></td>
<td align="center"><code>m_xgboost</code></td>
<td align="center"><code>xgb_</code></td>
<td align="center">nrounds, eta, max_depth, min_child_weight,
verbose</td>
</tr>
<tr class="even">
<td align="center"><a href="https://cran.r-project.org/package=ranger" class="external-link">ranger</a></td>
<td align="center"><code>m_ranger</code></td>
<td align="center"><code>rgr_</code></td>
<td align="center">num.trees, write.forest, replace, verbose,
family</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="implementation">Implementation<a class="anchor" aria-label="anchor" href="#implementation"></a>
</h2>
<p>Both <code>XGBoost</code> and <code>ranger</code> libraries are
developed for efficient processing on multiple cores. The only
requirement is making sure that OpenMP is installed on the system. User
needs to pass the number of threads (<code>nthread</code>) in running
the <code>estimate_gps</code> function.</p>
<p>In the following section, we conduct several analyses to test the
scalability and performance. These analyses can be used to have a rough
estimate of what to expect in different data sizes and computational
resources.</p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-hirano_2004" class="csl-entry">
Hirano, Keisuke, and Guido W Imbens. 2004. <span>“The Propensity Score
with Continuous Treatments.”</span> <em>Applied Bayesian Modeling and
Causal Inference from Incomplete-Data Perspectives</em> 226164: 73–84.
<a href="https://doi.org/10.1002/0470090456.ch7" class="external-link">https://doi.org/10.1002/0470090456.ch7</a>.
</div>
<div id="ref-kennedy_2017" class="csl-entry">
Kennedy, Edward H, Zongming Ma, Matthew D McHugh, and Dylan S Small.
2017. <span>“Nonparametric Methods for Doubly Robust Estimation of
Continuous Treatment Effects.”</span> <em>Journal of the Royal
Statistical Society. Series B, Statistical Methodology</em> 79 (4):
1229. <a href="https://doi.org/10.1111/rssb.12212" class="external-link">https://doi.org/10.1111/rssb.12212</a>.
</div>
<div id="ref-rosenbaum_1983" class="csl-entry">
Rosenbaum, Paul R, and Donald B Rubin. 1983. <span>“The Central Role of
the Propensity Score in Observational Studies for Causal
Effects.”</span> <em>Biometrika</em> 70 (1): 41–55.
</div>
<div id="ref-superlearner_2007" class="csl-entry">
Van der Laan, Mark J, Eric C Polley, and Alan E Hubbard. 2007.
<span>“Super Learner.”</span> <em>Statistical Applications in Genetics
and Molecular Biology</em> 6 (1).
</div>
<div id="ref-wu_2018" class="csl-entry">
Wu, Xiao, Fabrizia Mealli, Marianthi-Anna Kioumourtzoglou, Francesca
Dominici, and Danielle Braun. 2020. <span>“Matching on Generalized
Propensity Scores with Continuous Exposures.”</span> <a href="https://arxiv.org/abs/1812.06575" class="external-link">https://arxiv.org/abs/1812.06575</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Naeem Khoshnevis, Xiao Wu, Danielle Braun.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
